{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\Desktop\\\\Online Book Thrift Store\\\\frontend\\\\src\\\\Components\\\\context\\\\bookContext\\\\bookContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { API_URL_BOOK } from \"../../../utils/apiURL\";\nimport { BOOK_DETAILS_SUCCESS, BOOK_DETAILS_FAIL, BOOK_CREATION_SUCCESS, BOOK_CREATION_FAIL } from \"./bookContextTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const bookContext = /*#__PURE__*/createContext();\n//Initial State\n\nconst INITIAL_STATE = {\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\n  book: null,\n  books: [],\n  loading: false,\n  error: null\n};\n\n//reducer\nconst bookReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    // Details\n    case BOOK_DETAILS_SUCCESS:\n      return {\n        ...state,\n        book: payload,\n        loading: false,\n        error: null\n      };\n    case BOOK_DETAILS_FAIL:\n      return {\n        ...state,\n        book: null,\n        loading: false,\n        error: payload\n      };\n    // Create\n    case BOOK_CREATION_SUCCESS:\n      return {\n        ...state,\n        book: payload,\n        loading: false,\n        error: null\n      };\n    case BOOK_CREATION_FAIL:\n      return {\n        ...state,\n        book: null,\n        loading: false,\n        error: payload\n      };\n    default:\n      return state;\n  }\n};\n\n//Provider\nconst BookContextProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(bookReducer, INITIAL_STATE);\n  const getBookDetailsAction = async id => {\n    var _state$userAuth;\n    const config = {\n      headers: {\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userAuth = state.userAuth) === null || _state$userAuth === void 0 ? void 0 : _state$userAuth.token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    try {\n      var _res$data;\n      const res = await axios.get(`${API_URL_BOOK}/${id}`, config);\n      if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.status) === \"success\") {\n        var _res$data2;\n        //dispatch\n        dispatch({\n          type: BOOK_DETAILS_SUCCESS,\n          payload: res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.bookFound\n        });\n      }\n    } catch (error) {\n      var _error$data, _error$data$response;\n      dispatch({\n        type: BOOK_DETAILS_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : (_error$data$response = _error$data.response) === null || _error$data$response === void 0 ? void 0 : _error$data$response.message\n      });\n    }\n  };\n  const fetchAllBook = async () => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    try {\n      var _res$data3;\n      const res = await axios.get(`${API_URL_BOOK}`, config);\n      if ((res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.status) === \"success\") {\n        var _res$data4;\n        //dispatch\n        dispatch({\n          type: BOOK_DETAILS_SUCCESS,\n          payload: res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.books\n        });\n      }\n    } catch (error) {\n      var _error$data2, _error$data2$response;\n      dispatch({\n        type: BOOK_DETAILS_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data2 = error.data) === null || _error$data2 === void 0 ? void 0 : (_error$data2$response = _error$data2.response) === null || _error$data2$response === void 0 ? void 0 : _error$data2$response.message\n      });\n    }\n  };\n\n  //Get account Details action\n  const createBookAction = async formData => {\n    var _state$userAuth2;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userAuth2 = state.userAuth) === null || _state$userAuth2 === void 0 ? void 0 : _state$userAuth2.token}`\n      }\n    };\n    try {\n      var _res$data5;\n      const res = await axios.post(`${API_URL_BOOK}/post`, formData, config);\n      if ((res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.status) === \"success\") {\n        var _res$data6, _res$data6$data;\n        //console.log(res.data.data)\n        //dispatch\n        dispatch({\n          type: BOOK_CREATION_SUCCESS,\n          payload: res === null || res === void 0 ? void 0 : (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : (_res$data6$data = _res$data6.data) === null || _res$data6$data === void 0 ? void 0 : _res$data6$data.bookFound\n        });\n      }\n    } catch (error) {\n      var _error$data3, _error$data3$response;\n      dispatch({\n        type: BOOK_CREATION_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data3 = error.data) === null || _error$data3 === void 0 ? void 0 : (_error$data3$response = _error$data3.response) === null || _error$data3$response === void 0 ? void 0 : _error$data3$response.message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(bookContext.Provider, {\n    value: {\n      getBookDetailsAction,\n      book: state === null || state === void 0 ? void 0 : state.book,\n      createBookAction,\n      fetchAllBook,\n      error: state === null || state === void 0 ? void 0 : state.error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(BookContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n_c = BookContextProvider;\nexport default BookContextProvider;\nvar _c;\n$RefreshReg$(_c, \"BookContextProvider\");","map":{"version":3,"names":["createContext","useReducer","axios","API_URL_BOOK","BOOK_DETAILS_SUCCESS","BOOK_DETAILS_FAIL","BOOK_CREATION_SUCCESS","BOOK_CREATION_FAIL","jsxDEV","_jsxDEV","bookContext","INITIAL_STATE","userAuth","JSON","parse","localStorage","getItem","book","books","loading","error","bookReducer","state","action","type","payload","BookContextProvider","children","_s","dispatch","getBookDetailsAction","id","_state$userAuth","config","headers","Authorization","token","_res$data","res","get","data","status","_res$data2","bookFound","_error$data","_error$data$response","response","message","fetchAllBook","_res$data3","_res$data4","_error$data2","_error$data2$response","createBookAction","formData","_state$userAuth2","_res$data5","post","_res$data6","_res$data6$data","_error$data3","_error$data3$response","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/OneDrive/Desktop/Online Book Thrift Store/frontend/src/Components/context/bookContext/bookContext.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API_URL_BOOK } from \"../../../utils/apiURL\";\r\n\r\nimport {\r\n  BOOK_DETAILS_SUCCESS,\r\n  BOOK_DETAILS_FAIL,\r\n  BOOK_CREATION_SUCCESS,\r\n  BOOK_CREATION_FAIL,\r\n} from \"./bookContextTypes\";\r\n\r\nexport const bookContext = createContext();\r\n//Initial State\r\n\r\nconst INITIAL_STATE = {\r\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\r\n  book: null,\r\n  books: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\n//reducer\r\nconst bookReducer = (state, action) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    // Details\r\n    case BOOK_DETAILS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        book: payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case BOOK_DETAILS_FAIL:\r\n      return {\r\n        ...state,\r\n        book: null,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    // Create\r\n    case BOOK_CREATION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        book: payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case BOOK_CREATION_FAIL:\r\n      return {\r\n        ...state,\r\n        book: null,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n//Provider\r\nconst BookContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(bookReducer, INITIAL_STATE);\r\n  const getBookDetailsAction = async id => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${state?.userAuth?.token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n\r\n      const res = await axios.get(`${API_URL_BOOK}/${id}`, config);\r\n      if (res?.data?.status === \"success\") {\r\n        //dispatch\r\n        dispatch({\r\n          type: BOOK_DETAILS_SUCCESS,\r\n          payload: res?.data?.bookFound,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: BOOK_DETAILS_FAIL,\r\n        payload: error?.data?.response?.message,\r\n      });\r\n    }\r\n  };\r\n  \r\n\r\n  const fetchAllBook = async () => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n\r\n      const res = await axios.get(`${API_URL_BOOK}`, config);\r\n      if (res?.data?.status === \"success\") {\r\n        //dispatch\r\n        dispatch({\r\n          type: BOOK_DETAILS_SUCCESS,\r\n          payload: res?.data?.books,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: BOOK_DETAILS_FAIL,\r\n        payload: error?.data?.response?.message,\r\n      });\r\n    }\r\n  }; \r\n\r\n  //Get account Details action\r\n  const createBookAction = async (formData) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${state?.userAuth?.token}`,\r\n      },\r\n    };\r\n    try {\r\n      const res = await axios.post(`${API_URL_BOOK}/post`, formData, config);\r\n      if (res?.data?.status === \"success\") {\r\n        //console.log(res.data.data)\r\n        //dispatch\r\n        dispatch({\r\n          type: BOOK_CREATION_SUCCESS,\r\n          payload: res?.data?.data?.bookFound,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: BOOK_CREATION_FAIL,\r\n        payload: error?.data?.response?.message,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <bookContext.Provider\r\n      value={{\r\n        getBookDetailsAction,\r\n        book: state?.book,\r\n        createBookAction,\r\n        fetchAllBook,\r\n        error: state?.error,\r\n      }}\r\n    >\r\n      {children}\r\n    </bookContext.Provider>\r\n  );\r\n};\r\n\r\nexport default BookContextProvider ; \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}