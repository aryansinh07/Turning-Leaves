{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\Desktop\\\\Online Book Thrift Store\\\\frontend\\\\src\\\\Components\\\\context\\\\bookContext\\\\bookContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { API_URL_BOOK } from \"../../../utils/apiURL\";\nimport { BOOK_DETAILS_SUCCESS, BOOK_DETAILS_FAIL, BOOK_CREATION_SUCCES, BOOK_CREATION_FAIL } from \"./bookContextTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const bookContext = /*#__PURE__*/createContext();\n//Initial State\n\nconst INITIAL_STATE = {\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\n  book: null,\n  books: [],\n  loading: false,\n  error: null\n};\n\n//reducer\nconst bookReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    // Details\n    case BOOK_DETAILS_SUCCESS:\n      return {\n        ...state,\n        book: payload,\n        loading: false,\n        error: null\n      };\n    case BOOK_DETAILS_FAIL:\n      return {\n        ...state,\n        book: null,\n        loading: false,\n        error: payload\n      };\n    // Create\n    case BOOK_CREATION_SUCCES:\n      return {\n        ...state,\n        book: payload,\n        loading: false,\n        error: null\n      };\n    case BOOK_CREATION_FAIL:\n      return {\n        ...state,\n        book: null,\n        loading: false,\n        error: payload\n      };\n    default:\n      return state;\n  }\n};\n\n//Provider\nexport const BookContextProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(bookReducer, INITIAL_STATE);\n  const getBookDetailsAction = async id => {\n    var _state$userauth;\n    const config = {\n      headers: {\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userauth = state.userauth) === null || _state$userauth === void 0 ? void 0 : _state$userauth.token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    try {\n      var _res$data;\n      const res = await axios.get(`${API_URL_BOOK}/${id}`, config);\n      if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.status) === \"success\") {\n        var _res$data2;\n        //dispatch\n        dispatch({\n          type: BOOK_DETAILS_SUCCESS,\n          payload: res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.bookFound\n        });\n      }\n    } catch (error) {\n      var _error$data, _error$data$response;\n      dispatch({\n        type: BOOK_DETAILS_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : (_error$data$response = _error$data.response) === null || _error$data$response === void 0 ? void 0 : _error$data$response.message\n      });\n    }\n  };\n\n  //Get account Details action\n  const createBookAction = async formData => {\n    var _state$userAuth;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userAuth = state.userAuth) === null || _state$userAuth === void 0 ? void 0 : _state$userAuth.token}`\n      }\n    };\n    try {\n      var _res$data3;\n      const res = await axios.post(`${API_URL_BOOK}`, formData, config);\n      if ((res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.status) === \"success\") {\n        var _res$data4;\n        //dispatch\n        dispatch({\n          type: BOOK_CREATION_SUCCES,\n          payload: res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.bookFound\n        });\n      }\n      window.location.href = \"/\";\n    } catch (error) {\n      var _error$data2, _error$data2$response;\n      console.log(error);\n      dispatch({\n        type: BOOK_CREATION_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data2 = error.data) === null || _error$data2 === void 0 ? void 0 : (_error$data2$response = _error$data2.response) === null || _error$data2$response === void 0 ? void 0 : _error$data2$response.message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(bookContext.Provider, {\n    value: {\n      getBookDetailsAction,\n      book: state === null || state === void 0 ? void 0 : state.book,\n      createBookAction,\n      error: state === null || state === void 0 ? void 0 : state.error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n_s(BookContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n_c = BookContextProvider;\nvar _c;\n$RefreshReg$(_c, \"BookContextProvider\");","map":{"version":3,"names":["createContext","useReducer","axios","API_URL_BOOK","BOOK_DETAILS_SUCCESS","BOOK_DETAILS_FAIL","BOOK_CREATION_SUCCES","BOOK_CREATION_FAIL","jsxDEV","_jsxDEV","bookContext","INITIAL_STATE","userAuth","JSON","parse","localStorage","getItem","book","books","loading","error","bookReducer","state","action","type","payload","BookContextProvider","children","_s","dispatch","getBookDetailsAction","id","_state$userauth","config","headers","Authorization","userauth","token","_res$data","res","get","data","status","_res$data2","bookFound","_error$data","_error$data$response","response","message","createBookAction","formData","_state$userAuth","_res$data3","post","_res$data4","window","location","href","_error$data2","_error$data2$response","console","log","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/OneDrive/Desktop/Online Book Thrift Store/frontend/src/Components/context/bookContext/bookContext.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API_URL_BOOK } from \"../../../utils/apiURL\";\r\n\r\nimport {\r\n  BOOK_DETAILS_SUCCESS,\r\n  BOOK_DETAILS_FAIL,\r\n  BOOK_CREATION_SUCCES,\r\n  BOOK_CREATION_FAIL,\r\n} from \"./bookContextTypes\";\r\n\r\nexport const bookContext = createContext();\r\n//Initial State\r\n\r\nconst INITIAL_STATE = {\r\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\r\n  book: null,\r\n  books: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\n//reducer\r\nconst bookReducer = (state, action) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    // Details\r\n    case BOOK_DETAILS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        book: payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case BOOK_DETAILS_FAIL:\r\n      return {\r\n        ...state,\r\n        book: null,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    // Create\r\n    case BOOK_CREATION_SUCCES:\r\n      return {\r\n        ...state,\r\n        book: payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case BOOK_CREATION_FAIL:\r\n      return {\r\n        ...state,\r\n        book: null,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n//Provider\r\nexport const BookContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(bookReducer, INITIAL_STATE);\r\n  const getBookDetailsAction = async id => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${state?.userauth?.token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n\r\n      const res = await axios.get(`${API_URL_BOOK}/${id}`, config);\r\n      if (res?.data?.status === \"success\") {\r\n        //dispatch\r\n        dispatch({\r\n          type: BOOK_DETAILS_SUCCESS,\r\n          payload: res?.data?.bookFound,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: BOOK_DETAILS_FAIL,\r\n        payload: error?.data?.response?.message,\r\n      });\r\n    }\r\n  };\r\n\r\n  //Get account Details action\r\n  const createBookAction = async formData => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${state?.userAuth?.token}`,\r\n      },\r\n    };\r\n    try {\r\n      const res = await axios.post(`${API_URL_BOOK}`, formData, config);\r\n      if (res?.data?.status === \"success\") {\r\n        //dispatch\r\n        dispatch({\r\n          type: BOOK_CREATION_SUCCES,\r\n          payload: res?.data?.bookFound,\r\n        });\r\n      }\r\n      window.location.href = \"/\";\r\n    } catch (error) {\r\n      console.log(error);\r\n      dispatch({\r\n        type: BOOK_CREATION_FAIL,\r\n        payload: error?.data?.response?.message,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <bookContext.Provider\r\n      value={{\r\n        getBookDetailsAction,\r\n        book: state?.book,\r\n        createBookAction,\r\n        error: state?.error,\r\n      }}\r\n    >\r\n      {children}\r\n    </bookContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}